# 최종 기술 명세서 v1.0

**작성일**: 2025-01-XX
**최종 수정일**: 2025-01-XX
**상태**: 확정 (LOCKED)
**목적**: AI-independent 완전한 재현 가능 명세

---

## ⚠️ 중요 공지

**이 문서는 절대적 진실(Ground Truth)입니다.**

- 추정 없음 (No Estimation)
- 예측 없음 (No Prediction)
- 할루시네이션 없음 (No Hallucination)
- 모든 내용은 실제 구현되었거나 확정된 사항만 기록

**문서 사용 규칙**:
1. 다른 AI가 이 문서를 읽으면 동일한 결과를 재현 가능해야 함
2. 모호한 표현 금지 ("약", "대략", "정도" 등)
3. 모든 버전 번호 명시
4. 모든 URL, 키, 설정값 정확히 기록

---

## 1. 프로젝트 기본 정보

### 1.1 프로젝트 식별 정보

```yaml
프로젝트명: 맛집 어드벤처 로그 (Adventure Log)
영문명: adventure-log
버전: 1.0.0-alpha
개발자: sungmoon2
GitHub: https://github.com/sungmoon2/adventure-log
개발 시작일: 2025-01-XX
타겟 플랫폼: 웹 (Desktop + Mobile Responsive)
```

### 1.2 핵심 목적

```
목적: 인스타그램, 블로그 등에서 발견한 장소 정보를 단일 플랫폼에서 관리하고 우선순위 기반으로 방문 계획 수립

해결하는 문제:
1. 정보 분산 (인스타 저장, 네이버 지도, 아이폰 메모)
2. 우선순위 파악 어려움
3. 검색 불가능
4. 방문 여부 추적 어려움
```

---

## 2. 기술 스택 (확정)

### 2.1 프론트엔드

```yaml
언어: TypeScript 5.0+
프레임워크: React 18.2.0
빌드 도구: Vite 7.1.11
패키지 매니저: npm 10.9.3
Node.js: 22.20.0

의존성 (package.json):
  "@supabase/supabase-js": "^2.x"
  "@tanstack/react-query": "^5.x"
  "react-router-dom": "^6.x"
  "react-hook-form": "^7.x"
  "lucide-react": "^0.x"
  "framer-motion": "^11.x"
  "tailwindcss": "^3.4"
  "postcss": "^8.x"
  "autoprefixer": "^10.x"

스타일링: Tailwind CSS 3.4
상태 관리:
  - 서버 상태: TanStack Query v5
  - 클라이언트 상태: React Context (Phase 2에서 Zustand 검토)
라우팅: React Router v6
폼 관리: React Hook Form v7
아이콘: Lucide React
애니메이션: Framer Motion 11 (Phase 2부터 사용)
```

### 2.2 백엔드

```yaml
방식: Jamstack (서버리스)
이유: 복잡한 비즈니스 로직 없음, Supabase가 모든 백엔드 기능 제공

제거된 기술 스택:
  - Flask (명세서에 있었으나 불필요하여 제거)
  - SQLAlchemy (Supabase SDK로 대체)
  - Flask-JWT (Supabase Auth로 대체)
  - Railway (백엔드 서버 불필요)
```

### 2.3 데이터베이스 및 인프라

```yaml
데이터베이스:
  제공자: Supabase
  엔진: PostgreSQL 15
  리전: Northeast Asia (Seoul)
  프로젝트 ID: hrmtuwuxbspudguecyrp
  Project URL: https://hrmtuwuxbspudguecyrp.supabase.co

인증:
  제공자: Supabase Auth
  방식: OAuth 2.0 (Google)
  세션 관리: JWT (Supabase 자동 처리)

파일 저장소:
  제공자: Supabase Storage
  버킷명: place-images
  공개 여부: Public (읽기만)
  용량 한도: 2GB (무료)
  파일 크기 제한: 5MB/파일

호스팅:
  프론트엔드: Vercel
  백엔드: 없음 (Supabase가 백엔드 역할)
  비용: 월 $0 (완전 무료)
```

---

## 3. 아키텍처

### 3.1 시스템 아키텍처 다이어그램

```
┌─────────────────────────────────────┐
│   사용자 (Browser)                   │
└───────────────┬─────────────────────┘
                │ HTTPS
                ↓
┌─────────────────────────────────────┐
│   Vercel (Static Hosting)           │
│   ┌─────────────────────────────┐   │
│   │ React SPA                   │   │
│   │ - TypeScript                │   │
│   │ - Tailwind CSS              │   │
│   │ - Supabase SDK (Direct)     │   │
│   └─────────────────────────────┘   │
└───────────────┬─────────────────────┘
                │ Supabase SDK (HTTPS)
                ↓
┌─────────────────────────────────────┐
│   Supabase (Backend as a Service)   │
│   ┌─────────────────────────────┐   │
│   │ PostgreSQL 15               │   │
│   │ - places 테이블             │   │
│   │ - Row Level Security        │   │
│   └─────────────────────────────┘   │
│   ┌─────────────────────────────┐   │
│   │ Auth (OAuth)                │   │
│   │ - Google Sign-In            │   │
│   └─────────────────────────────┘   │
│   ┌─────────────────────────────┐   │
│   │ Storage                     │   │
│   │ - place-images bucket       │   │
│   └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

### 3.2 데이터 흐름

```
사용자 액션 → React 컴포넌트 → Supabase SDK → PostgreSQL
                                            ↓
                                      RLS 정책 검증
                                            ↓
                                       데이터 반환
                                            ↓
                                    TanStack Query 캐싱
                                            ↓
                                      UI 업데이트
```

---

## 4. 환경 설정 (재현 가능)

### 4.1 필수 소프트웨어

```yaml
Node.js: v22.20.0 (필수)
  설치: https://nodejs.org/
  확인: node --version

npm: 10.9.3 (Node.js 설치 시 포함)
  확인: npm --version

Git: 최신 버전
  설치: https://git-scm.com/
  확인: git --version
  설정:
    git config --global user.name "sungmoon2"
    git config --global user.email "qkrtjdans4145@gmail.com"

Python: 불필요 (명세서에 있었으나 백엔드 제거로 불필요)
PostgreSQL 로컬: 불필요 (Supabase 사용)
```

### 4.2 환경변수 (정확한 값)

**프론트엔드 (.env)**:
```env
# Supabase 연결 정보
VITE_SUPABASE_URL=https://hrmtuwuxbspudguecyrp.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhybXR1d3V4YnNwdWRndWVjeXJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEwMjU3NDMsImV4cCI6MjA3NjYwMTc0M30.4rUF1E818nNL02egQwiizeVuMtQgd4VDHXNLTLP11OM

# Google OAuth (Phase 1에서 설정 예정)
# VITE_GOOGLE_CLIENT_ID=미설정
```

**주의사항**:
- Vite는 `VITE_` 접두사 필수
- `REACT_APP_`은 작동하지 않음 (CRA 전용)
- `import.meta.env.VITE_XXX`로 접근

---

## 5. 프로젝트 구조 (확정)

```
adventure-log/
├── .git/                          # Git 저장소
├── .gitignore                     # Node, env 파일 제외
├── README.md                      # 프로젝트 개요
├── .env.example                   # 환경변수 예제
│
├── docs/                          # 모든 문서
│   ├── 개발일지/
│   │   ├── 개발일지_001_프로젝트_초기_설정.md
│   │   ├── 개발일지_002_Supabase_프로젝트_생성.md
│   │   └── 개발일지_003_React_프로젝트_초기_설정.md
│   ├── 명세서/
│   │   ├── 최종_기술_명세서.md (이 파일)
│   │   ├── 데이터베이스_설계_명세서.md
│   │   ├── API_설계_명세서.md
│   │   └── 프론트엔드_아키텍처_명세서.md
│   ├── 개발계획/
│   │   ├── Phase_1_개발_계획.md
│   │   └── 전체_개발_로드맵.md
│   └── 의사결정기록/
│       ├── 아키텍처_결정사항.md
│       ├── 데이터_모델_결정사항.md
│       └── 기술_스택_선정_이유.md
│
├── database/                      # SQL 스키마
│   └── schema_001_initial.sql     # 초기 스키마
│
└── frontend/                      # React 애플리케이션
    ├── public/
    ├── src/
    │   ├── lib/
    │   │   └── supabase.ts        # Supabase 클라이언트
    │   ├── types/
    │   │   └── database.ts        # TypeScript 타입
    │   ├── App.tsx
    │   ├── main.tsx
    │   └── index.css
    ├── .env                       # 환경변수 (Git 제외)
    ├── package.json
    ├── tsconfig.json
    ├── tailwind.config.js
    ├── postcss.config.js
    └── vite.config.ts
```

---

## 6. 빌드 및 실행 명령어 (정확한 명령)

### 6.1 로컬 개발 환경 실행

```bash
# 1. 저장소 클론
git clone https://github.com/sungmoon2/adventure-log.git
cd adventure-log

# 2. 프론트엔드 의존성 설치
cd frontend
npm install

# 3. 환경변수 설정
# .env 파일 생성 후 위 4.2의 값 복사

# 4. 개발 서버 실행
npm run dev

# 5. 브라우저 접속
# http://localhost:5173/
```

### 6.2 프로덕션 빌드

```bash
cd frontend
npm run build

# 결과물: frontend/dist/
# Vercel 배포 시 자동 빌드
```

---

## 7. 배포 정보

### 7.1 Vercel 배포 설정

```yaml
프레임워크: Vite
빌드 명령어: npm run build
출력 디렉토리: dist
Node.js 버전: 22.x

환경변수 (Vercel Dashboard 설정):
  VITE_SUPABASE_URL: https://hrmtuwuxbspudguecyrp.supabase.co
  VITE_SUPABASE_ANON_KEY: (위 4.2 참조)
```

### 7.2 GitHub 연동

```yaml
저장소: https://github.com/sungmoon2/adventure-log
브랜치: main
자동 배포: main 브랜치 push 시 자동 배포
```

---

## 8. 개발 워크플로우

### 8.1 코드 변경 → 배포 플로우

```
1. 로컬에서 코드 작성
2. 테스트 (npm run dev)
3. Git 커밋
   git add .
   git commit -m "feat: 기능 설명"
4. GitHub 푸시
   git push origin main
5. Vercel 자동 배포 (약 2분)
6. 프로덕션 URL 접속 확인
```

### 8.2 커밋 메시지 규칙

```
형식: <type>: <설명>

타입:
  feat: 새 기능
  fix: 버그 수정
  docs: 문서 변경
  style: 코드 포맷팅
  refactor: 리팩토링
  test: 테스트 추가
  chore: 빌드 설정 등

예시:
  feat: Google OAuth 로그인 구현
  fix: 장소 삭제 버그 수정
  docs: API 명세서 업데이트
```

---

## 9. 제약사항 및 한계

### 9.1 Supabase 무료 플랜 한도

```yaml
데이터베이스:
  저장소: 500MB
  행 수: 무제한
  API 요청: 무제한
  동시 연결: 60개

Storage:
  용량: 2GB
  대역폭: 5GB/월
  파일 크기: 5MB/파일

Auth:
  MAU (월간 활성 사용자): 50,000명
  실제 사용자: 1명 (개인 프로젝트)
```

### 9.2 Vercel 무료 플랜 한도

```yaml
대역폭: 100GB/월
빌드: 100분/월
프로젝트: 무제한
동시 배포: 무제한
```

### 9.3 기술적 제약

```
1. 오프라인 모드 없음 (PWA 아님, Phase 3 검토)
2. 실시간 협업 없음 (1인 사용자만)
3. 모바일 네이티브 앱 없음 (웹만)
4. 백업 자동화 없음 (수동 pg_dump 필요)
```

---

## 10. 보안

### 10.1 인증

```
방식: OAuth 2.0 (Google)
제공자: Supabase Auth
토큰: JWT (httpOnly cookie, Supabase 자동 관리)
세션 만료: 7일
리프레시 토큰: Supabase 자동 처리
```

### 10.2 데이터 접근 제어

```
Row Level Security (RLS):
  - 모든 테이블 RLS 활성화
  - SELECT: auth.uid() = user_id
  - INSERT: auth.uid() = user_id
  - UPDATE: auth.uid() = user_id
  - DELETE: auth.uid() = user_id

결과: 사용자는 자신의 데이터만 접근 가능
```

### 10.3 API 키 보호

```
Anon Key (공개 가능):
  - 클라이언트에 노출됨
  - RLS로 보호됨
  - XSS 공격 시에도 타인 데이터 접근 불가

Service Role Key (절대 비공개):
  - 서버에서만 사용 (현재 미사용)
  - RLS 우회 가능
  - Git에 커밋 금지
```

---

## 11. 버전 관리

### 11.1 현재 버전

```
프로젝트 버전: 1.0.0-alpha
명세서 버전: 1.0
스키마 버전: 001
```

### 11.2 버전 업데이트 규칙

```
프로젝트: Semantic Versioning
  MAJOR.MINOR.PATCH-alpha/beta/rc

명세서:
  MAJOR.MINOR
  MAJOR: 아키텍처 변경
  MINOR: 기능 추가/변경

스키마:
  000, 001, 002, ... (순차 증가)
  파일명: schema_<버전>_<설명>.sql
```

---

## 12. 참조 문서

```
이 명세서와 함께 읽어야 할 문서:
1. 데이터베이스_설계_명세서.md (테이블 구조)
2. API_설계_명세서.md (Supabase 쿼리 패턴)
3. 프론트엔드_아키텍처_명세서.md (컴포넌트 구조)
4. Phase_1_개발_계획.md (구현 순서)
5. 아키텍처_결정사항.md (왜 이렇게 설계했는가)
```

---

## 13. 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2025-01-XX | 최초 작성 (확정) | sungmoon2 |

---

## 14. 검증 체크리스트

**다른 AI가 이 명세서만으로 프로젝트를 재현할 수 있는가?**

- [ ] 모든 버전 번호 명시됨
- [ ] 모든 URL 정확함
- [ ] 모든 환경변수 값 제공됨
- [ ] 모든 명령어 실행 가능함
- [ ] 추정/예측 없음
- [ ] 모호한 표현 없음

---

**이 문서는 절대적 진실(Ground Truth)입니다.**
**변경 시 반드시 버전 업데이트 및 변경 이력 기록 필수**
